<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ENIM CUP â€“ Tournoi Ramadan 2025</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš½</text></svg>" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div id="loader">
    <div class="loader-inner">
      <img src="logo.png" alt="ENIM Logo" class="nav-logo-img" onerror="this.style.display='none'" />
      <div class="loader-logo">ENIM <span>CUP</span></div>
      <div class="loader-bar"><div class="loader-fill"></div></div>
      <p>Connexion Ã  la base de donnÃ©esâ€¦</p>
    </div>
  </div>

  <nav>
    <div class="nav-logo">
      <img src="logo.png" alt="ENIM Logo" class="nav-logo-img" onerror="this.style.display='none'" />
      ENIM <span>CUP</span>
    </div>
    <div class="nav-links">
      <button onclick="showPage('home')"       data-page="home"       class="active">Accueil</button>
      <button onclick="showPage('classement')" data-page="classement">Classement</button>
      <button onclick="showPage('matchs')"     data-page="matchs">Matchs</button>
      <button onclick="showPage('bracket')"    data-page="bracket">ğŸ¯ Tableau Final</button>
      <button onclick="showPage('equipes')"    data-page="equipes">Ã‰quipes</button>
      <button onclick="showPage('stats')"      data-page="stats">Statistiques</button>
      <button onclick="showPage('admin')"      data-page="admin" class="nav-admin">âš™ Admin</button>
    </div>
    <button class="nav-burger" onclick="toggleMobileMenu()">â˜°</button>
  </nav>

  <div class="mobile-menu" id="mobileMenu">
    <button onclick="showPage('home');toggleMobileMenu()"       data-page="home"       class="active">ğŸ  Accueil</button>
    <button onclick="showPage('classement');toggleMobileMenu()" data-page="classement">ğŸ† Classement</button>
    <button onclick="showPage('matchs');toggleMobileMenu()"     data-page="matchs">âš½ Matchs</button>
    <button onclick="showPage('bracket');toggleMobileMenu()"    data-page="bracket">ğŸ¯ Tableau Final</button>
    <button onclick="showPage('equipes');toggleMobileMenu()"    data-page="equipes">ğŸ‘¥ Ã‰quipes</button>
    <button onclick="showPage('stats');toggleMobileMenu()"      data-page="stats">ğŸ“Š Stats</button>
    <button onclick="showPage('admin');toggleMobileMenu()"      data-page="admin" class="nav-admin">âš™ Admin</button>
  </div>

  <main>

    <!-- HOME -->
    <section class="page active" id="page-home">
      <div class="hero">
        <div class="hero-glow"></div>
        <div class="hero-badge">ğŸŒ™ Ramadan 1446H Â· ENIM Rabat</div>
        <h1 class="hero-title">ENIM <span>CUP</span></h1>
        <h2 class="hero-sub">Tournoi de Football Ramadan 2025</h2>
        <p class="hero-desc">4 groupes Â· 2 qualifiÃ©s par groupe Â· Quarts â†’ Demis â†’ Finale</p>
        <div class="hero-stats">
          <div class="hero-stat"><div class="hs-num" id="hs-equipes">â€“</div><div class="hs-label">Ã‰quipes</div></div>
          <div class="hero-stat"><div class="hs-num">4</div><div class="hs-label">Groupes</div></div>
          <div class="hero-stat"><div class="hs-num" id="hs-matchs">â€“</div><div class="hs-label">Matchs jouÃ©s</div></div>
          <div class="hero-stat"><div class="hs-num" id="hs-buts">â€“</div><div class="hs-label">Buts</div></div>
        </div>
      </div>

      <div class="phase-bar" id="phaseBar">
        <div class="ph-step" id="ph-groupe"><div class="ph-num">1</div><div class="ph-lbl">Phase de Groupes</div></div>
        <div class="ph-arrow">â€º</div>
        <div class="ph-step" id="ph-quart"><div class="ph-num">2</div><div class="ph-lbl">Quarts de Finale</div></div>
        <div class="ph-arrow">â€º</div>
        <div class="ph-step" id="ph-demi"><div class="ph-num">3</div><div class="ph-lbl">Demi-Finales</div></div>
        <div class="ph-arrow">â€º</div>
        <div class="ph-step" id="ph-finale"><div class="ph-num">4</div><div class="ph-lbl">Finale</div></div>
      </div>

      <div class="home-next">
        <div class="section-label">â± Prochain match</div>
        <div id="nextMatch" class="next-match-card">
          <span style="color:var(--muted);grid-column:1/-1;text-align:center">Chargementâ€¦</span>
        </div>
      </div>
    </section>

    <!-- CLASSEMENT PAR GROUPES -->
    <section class="page" id="page-classement">
      <div class="page-header">
        <h2 class="page-title">ğŸ† <span>Classement</span></h2>
        <p class="page-sub">Les 2 premiers de chaque groupe se qualifient pour les Quarts de Finale</p>
      </div>
      <div class="group-tabs" id="groupTabs">
        <button class="active" onclick="switchGroup(this,'A')">Groupe A</button>
        <button onclick="switchGroup(this,'B')">Groupe B</button>
        <button onclick="switchGroup(this,'C')">Groupe C</button>
        <button onclick="switchGroup(this,'D')">Groupe D</button>
      </div>
      <div id="groupContent"></div>
    </section>

    <!-- MATCHS -->
    <section class="page" id="page-matchs">
      <div class="page-header">
        <h2 class="page-title">âš½ <span>Matchs</span></h2>
        <p class="page-sub">Tous les matchs du tournoi</p>
      </div>
      <div class="group-tabs">
        <button class="active" onclick="filterMatchPhase(this,'all')">Tous</button>
        <button onclick="filterMatchPhase(this,'groupe')">Groupes</button>
        <button onclick="filterMatchPhase(this,'quart')">Quarts</button>
        <button onclick="filterMatchPhase(this,'demi')">Demis</button>
        <button onclick="filterMatchPhase(this,'finale')">Finale</button>
      </div>
      <div id="matchsList"></div>
    </section>

    <!-- BRACKET -->
    <section class="page" id="page-bracket">
      <div class="page-header">
        <h2 class="page-title">ğŸ¯ <span>Tableau Final</span></h2>
        <p class="page-sub">Phases Ã  Ã©limination directe</p>
      </div>
      <div id="bracketView"></div>
    </section>

    <!-- Ã‰QUIPES -->
    <section class="page" id="page-equipes">
      <div class="page-header">
        <h2 class="page-title">ğŸ‘¥ <span>Ã‰quipes</span></h2>
        <p class="page-sub">Cliquez sur une Ã©quipe pour voir ses joueurs</p>
      </div>
      <div class="teams-grid" id="teamsGrid"></div>
    </section>

    <!-- STATS -->
    <section class="page" id="page-stats">
      <div class="page-header">
        <h2 class="page-title">ğŸ“Š <span>Statistiques</span></h2>
        <p class="page-sub">Buteurs, cartons et donnÃ©es globales</p>
      </div>
      <div class="stats-cards" id="statsCards"></div>
      <h3 class="sub-title">âš½ Classement des Buteurs</h3>
      <div class="table-wrap" style="margin-bottom:2rem">
        <table>
          <thead><tr><th>#</th><th>Joueur</th><th>Ã‰quipe</th><th>Gr.</th><th>Buts</th><th>ğŸŸ¨</th><th>ğŸŸ¥</th></tr></thead>
          <tbody id="scorersBody"></tbody>
        </table>
      </div>
      <h3 class="sub-title">ğŸŸ¨ Cartons</h3>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Joueur</th><th>Ã‰quipe</th><th>Type</th><th>Match</th><th>Min.</th></tr></thead>
          <tbody id="cartonsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ADMIN -->
    <section class="page" id="page-admin">
      <div id="adminLogin" class="login-wrap">
        <div class="login-card">
          <div class="login-icon">ğŸ”</div>
          <h2>Espace Admin</h2>
          <p>AccÃ¨s rÃ©servÃ© aux organisateurs</p>
          <div id="loginMsg" class="msg"></div>
          <div class="form-group"><label>Email</label><input type="email" id="loginEmail" placeholder="admin@enim.ma" /></div>
          <div class="form-group"><label>Mot de passe</label><input type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" /></div>
          <button class="btn btn-primary btn-full" onclick="doLogin()">Se connecter</button>
        </div>
      </div>

      <div id="adminDash" style="display:none">
        <div class="dash-header">
          <div>
            <h2 class="page-title">âš™ <span>Tableau de Bord</span></h2>
            <p class="page-sub" id="dashUser"></p>
          </div>
          <button class="btn btn-danger btn-sm" onclick="doLogout()">DÃ©connexion</button>
        </div>

        <div class="admin-tabs">
          <button class="active" onclick="adminTab(this,'tab-equipes')">ğŸ‘¥ Ã‰quipes</button>
          <button onclick="adminTab(this,'tab-joueurs')">ğŸ½ Joueurs</button>
          <button onclick="adminTab(this,'tab-matchs')">âš½ Matchs</button>
          <button onclick="adminTab(this,'tab-cartons')">ğŸŸ¨ Cartons</button>
          <button onclick="adminTab(this,'tab-settings')">âš™ ParamÃ¨tres</button>
        </div>

        <!-- Ã‰QUIPES -->
        <div class="admin-tab active" id="tab-equipes">
          <div class="admin-card">
            <h3>Ajouter une Ã©quipe</h3>
            <div class="form-row">
              <div class="form-group"><label>Nom *</label><input id="eq-nom" placeholder="GC Informatique" /></div>
              <div class="form-group"><label>Emoji</label><input id="eq-emoji" placeholder="ğŸ’»" maxlength="2" /></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Groupe *</label>
                <select id="eq-groupe">
                  <option value="A">Groupe A</option><option value="B">Groupe B</option>
                  <option value="C">Groupe C</option><option value="D">Groupe D</option>
                </select>
              </div>
              <div class="form-group"><label>Coach</label><input id="eq-coach" placeholder="Nom du responsable" /></div>
            </div>
            <div id="eqMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="addEquipe()">+ Ajouter l'Ã©quipe</button>
          </div>
          <div class="admin-card"><h3>Ã‰quipes</h3><div id="adminEquipesList"></div></div>
        </div>

        <!-- JOUEURS -->
        <div class="admin-tab" id="tab-joueurs">
          <div class="admin-card">
            <h3>Ajouter un joueur</h3>
            <div class="form-row">
              <div class="form-group"><label>Nom *</label><input id="j-nom" placeholder="Mohammed Alami" /></div>
              <div class="form-group"><label>NumÃ©ro</label><input id="j-num" type="number" placeholder="10" min="1" max="99" /></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Ã‰quipe *</label><select id="j-equipe"><option value="">â€” Choisir â€”</option></select></div>
              <div class="form-group"><label>Poste</label>
                <select id="j-poste"><option>Gardien</option><option>DÃ©fenseur</option><option>Milieu</option><option>Attaquant</option></select>
              </div>
            </div>
            <div id="jMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="addJoueur()">+ Ajouter</button>
          </div>
          <div class="admin-card"><h3>Joueurs</h3><div id="adminJoueursList"></div></div>
        </div>

        <!-- MATCHS -->
        <div class="admin-tab" id="tab-matchs">
          <div class="admin-card">
            <h3>Enregistrer un match</h3>
            <div class="form-row">
              <div class="form-group"><label>Phase *</label>
                <select id="m-phase" onchange="onPhaseChange()">
                  <option value="groupe">Phase de Groupes</option>
                  <option value="quart">Quart de Finale</option>
                  <option value="demi">Demi-Finale</option>
                  <option value="3eme">Match 3Ã¨me Place</option>
                  <option value="finale">Finale</option>
                </select>
              </div>
              <div class="form-group" id="groupeSelectWrap">
                <label>Groupe</label>
                <select id="m-groupe"><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option></select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Domicile *</label><select id="m-home"><option value="">â€” Domicile â€”</option></select></div>
              <div class="form-group"><label>ExtÃ©rieur *</label><select id="m-away"><option value="">â€” ExtÃ©rieur â€”</option></select></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Date & Heure</label><input id="m-date" type="datetime-local" /></div>
              <div class="form-group"><label>Label</label><input id="m-label" placeholder="Ex: QF1, SF2, FINALEâ€¦" /></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Score Domicile</label><input id="m-sh" type="number" min="0" placeholder="â€“" /></div>
              <div class="form-group"><label>Score ExtÃ©rieur</label><input id="m-sa" type="number" min="0" placeholder="â€“" /></div>
            </div>
            <small class="hint">Laissez les scores vides pour un match Ã  venir.</small>
            <div id="mMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="addMatch()">+ Enregistrer</button>
          </div>
          <div class="admin-card"><h3>Liste des matchs</h3><div id="adminMatchsList"></div></div>
        </div>

        <!-- CARTONS -->
        <div class="admin-tab" id="tab-cartons">
          <div class="admin-card">
            <h3>Ajouter un carton</h3>
            <div class="form-row">
              <div class="form-group"><label>Joueur *</label><select id="c-joueur"><option value="">â€” Joueur â€”</option></select></div>
              <div class="form-group"><label>Match *</label><select id="c-match"><option value="">â€” Match â€”</option></select></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Type</label>
                <select id="c-type"><option value="jaune">ğŸŸ¨ Jaune</option><option value="rouge">ğŸŸ¥ Rouge</option></select>
              </div>
              <div class="form-group"><label>Minute</label><input id="c-minute" type="number" min="1" max="120" placeholder="45" /></div>
            </div>
            <div id="cMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="addCarton()">+ Ajouter</button>
          </div>
          <div class="admin-card"><h3>Cartons</h3><div id="adminCartonsList"></div></div>
        </div>

        <!-- SETTINGS -->
        <div class="admin-tab" id="tab-settings">
          <div class="admin-card">
            <h3>ğŸ”‘ Changer le mot de passe</h3>
            <div class="form-group"><label>Actuel</label><input type="password" id="cp-old" /></div>
            <div class="form-group"><label>Nouveau (min. 6 caractÃ¨res)</label><input type="password" id="cp-new" /></div>
            <div class="form-group"><label>Confirmer</label><input type="password" id="cp-confirm" /></div>
            <div id="cpMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="changePass()">Mettre Ã  jour</button>
          </div>
          <div class="admin-card">
            <h3>ğŸ“§ Changer l'email</h3>
            <div class="form-group"><label>Nouvel email</label><input type="email" id="ce-email" /></div>
            <div class="form-group"><label>Mot de passe actuel</label><input type="password" id="ce-pass" /></div>
            <div id="ceMsg" class="msg"></div>
            <button class="btn btn-primary" onclick="changeEmail()">Mettre Ã  jour</button>
          </div>
          <div class="admin-card" style="border-color:rgba(255,60,60,.2)">
            <h3 style="color:#ff6b6b">âš  Zone dangereuse</h3>
            <button class="btn btn-danger" onclick="resetAllData()">ğŸ—‘ RÃ©initialiser toutes les donnÃ©es</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <div class="modal-overlay" id="teamModal" onclick="if(event.target===this)closeModal('teamModal')">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="modalTeamTitle"></div>
        <button class="modal-close" onclick="closeModal('teamModal')">âœ•</button>
      </div>
      <div id="modalTeamBody"></div>
    </div>
  </div>

  <div id="toast"></div>

  <footer class="dev-footer">
    <span>DÃ©veloppÃ© par <em>Imad Taibi</em></span>
  </footer>
  <script type="module" src="app.js"></script>
</body>
</html>
